# RSS Reader - User Stories

> 本文档基于 RSS Reader 应用的完整页面功能，梳理出所有用户故事（User Stories），用于指导 E2E 测试覆盖和功能验证。

## 目录

- [US-01: 页面加载与路由导航](#us-01-页面加载与路由导航)
- [US-02: RSS 订阅源管理](#us-02-rss-订阅源管理)
- [US-03: 文章浏览与阅读](#us-03-文章浏览与阅读)
- [US-04: 收藏功能](#us-04-收藏功能)
- [US-05: 阅读历史](#us-05-阅读历史)
- [US-06: 搜索功能](#us-06-搜索功能)
- [US-07: 订阅源管理页面](#us-07-订阅源管理页面)
- [US-08: 主题切换](#us-08-主题切换)
- [US-09: 多语言支持](#us-09-多语言支持)
- [US-10: 设置管理](#us-10-设置管理)
- [US-11: OPML 导入导出](#us-11-opml-导入导出)
- [US-12: 订阅源刷新与同步](#us-12-订阅源刷新与同步)
- [US-13: 分类管理](#us-13-分类管理)
- [US-14: 响应式布局与导航](#us-14-响应式布局与导航)
- [US-15: 离线支持](#us-15-离线支持)
- [US-16: 错误处理](#us-16-错误处理)
- [US-17: AI 翻译功能](#us-17-ai-翻译功能)
- [US-18: AI 总结功能](#us-18-ai-总结功能)
- [E2E 测试覆盖矩阵](#e2e-测试覆盖矩阵)

---

## US-01: 页面加载与路由导航

**作为** 用户，**我希望** 能正确访问应用的各个页面，**以便** 使用不同功能。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-01-01 | 访问首页 `/` | 自动重定向到 `/#/feeds`，显示订阅源列表页面标题 | ✅ `ci/pageLoad` |
| US-01-02 | 访问设置页 `/#/settings` | 显示设置页面标题（Settings/设置） | ✅ `ci/pageLoad` |
| US-01-03 | 访问收藏页 `/#/favorites` | 显示收藏页面标题（Favorite/收藏） | ✅ `ci/pageLoad` |
| US-01-04 | 访问历史页 `/#/history` | 显示历史页面标题（History/历史） | ✅ `ci/pageLoad` |
| US-01-05 | 访问不存在的路由 | 显示 404 页面或重定向 | ✅ `ci/pageLoad` |
| US-01-06 | 导航栏链接跳转 | 通过导航栏访问各页面均可正常加载 | ✅ `ci/pageLoad` |
| US-01-07 | 访问搜索页 `/#/search` | 显示搜索页面 | ❌ 缺失 |
| US-01-08 | 访问订阅管理页 `/#/feed-management` | 显示订阅管理页面 | ❌ 缺失 |

---

## US-02: RSS 订阅源管理

**作为** 用户，**我希望** 能添加、查看和管理 RSS 订阅源，**以便** 订阅我感兴趣的内容。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-02-01 | 打开添加订阅对话框 | 显示包含 URL 输入框和分类选择的对话框 | ✅ `ci/feedSubscription` |
| US-02-02 | 添加有效的 RSS 源 | 成功订阅并在列表中显示新订阅源 | ✅ `ci/feedSubscription` |
| US-02-03 | 添加无效 URL | 显示错误提示信息 | ✅ `ci/feedSubscription` |
| US-02-04 | 添加重复的订阅源 | 显示重复订阅错误提示 | ✅ `ci/feedSubscription` |
| US-02-05 | 关闭添加对话框 | 对话框正常关闭 | ✅ `ci/feedSubscription` |
| US-02-06 | 订阅源列表显示文章数量 | 每个订阅源卡片显示文章总数 | ✅ `feedSubscription` |
| US-02-07 | 订阅源列表显示未读数量 | 显示未读文章数量徽标 | ✅ `feedSubscription` |
| US-02-08 | 删除/取消订阅 | 成功删除订阅源 | ❌ 缺失 |
| US-02-09 | 订阅带分类的源 | 可选择分类进行订阅 | ❌ 缺失 |
| US-02-10 | 空订阅列表状态 | 显示空状态提示和添加按钮 | ❌ 缺失 |

---

## US-03: 文章浏览与阅读

**作为** 用户，**我希望** 能浏览和阅读订阅源中的文章，**以便** 获取信息。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-03-01 | 点击订阅源查看文章列表 | 进入订阅源详情页，显示文章列表 | ✅ `ci/feedSubscription` |
| US-03-02 | 文章列表按时间排序 | 最新文章排在前面 | ⚠️ 部分（仅在集成测试中） |
| US-03-03 | 点击文章查看详情 | 进入文章详情页，显示标题、内容 | ✅ `ci/feedSubscription` |
| US-03-04 | 自动标记文章为已读 | 打开文章后自动标记为已读 | ✅ `feedSubscription` |
| US-03-05 | 显示已读状态标记 | 已读文章显示"✓ Read"标记 | ✅ `feedSubscription` |
| US-03-06 | 未读文章指示器 | 未读文章显示蓝色圆点 | ✅ `feedSubscription` |
| US-03-07 | 查看原文链接 | 显示"阅读原文"外部链接 | ✅ `ci/feedSubscription` |
| US-03-08 | 文章元数据显示 | 显示作者、发布时间、来源 | ✅ `feedSubscription` |
| US-03-09 | 从文章返回到文章列表 | 点击返回按钮回到订阅源详情页 | ✅ `ci/feedSubscription` |
| US-03-10 | 从订阅源详情返回到列表 | 点击返回按钮回到订阅源列表 | ✅ `ci/feedSubscription` |
| US-03-11 | 完整的三级导航 | 订阅列表 → 文章列表 → 文章详情，各级均可返回 | ✅ `ci/feedSubscription` |

---

## US-04: 收藏功能

**作为** 用户，**我希望** 能收藏感兴趣的文章，**以便** 之后方便查找和阅读。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-04-01 | 在文章详情页收藏文章 | 点击收藏按钮，文章被标记为收藏 | ❌ 缺失 |
| US-04-02 | 取消收藏文章 | 再次点击收藏按钮，取消收藏 | ❌ 缺失 |
| US-04-03 | 查看收藏列表 | 收藏页面显示所有已收藏的文章 | ❌ 缺失 |
| US-04-04 | 收藏列表按时间排序 | 最新收藏的排在前面 | ❌ 缺失 |
| US-04-05 | 从收藏列表点击文章 | 可以直接跳转到文章详情 | ❌ 缺失 |
| US-04-06 | 收藏列表为空 | 显示空状态提示 | ❌ 缺失 |
| US-04-07 | 订阅源列表收藏过滤 | 首页切换到"收藏"标签过滤显示有收藏文章的订阅源 | ❌ 缺失 |

---

## US-05: 阅读历史

**作为** 用户，**我希望** 能查看阅读历史，**以便** 回顾之前读过的文章。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-05-01 | 查看阅读历史列表 | 显示最近阅读的文章（最多50条） | ❌ 缺失 |
| US-05-02 | 历史按阅读时间排序 | 最近阅读的排在前面 | ❌ 缺失 |
| US-05-03 | 显示阅读时间 | 每篇文章显示阅读时间 | ❌ 缺失 |
| US-05-04 | 从历史列表点击文章 | 可以跳转到文章详情重新阅读 | ❌ 缺失 |
| US-05-05 | 阅读历史为空 | 显示空状态提示 | ❌ 缺失 |
| US-05-06 | 显示来源订阅源 | 每篇文章显示其来源订阅源名称 | ❌ 缺失 |

---

## US-06: 搜索功能

**作为** 用户，**我希望** 能搜索订阅源和文章，**以便** 快速找到需要的内容。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-06-01 | 访问搜索页面 | 显示搜索输入框 | ❌ 缺失 |
| US-06-02 | 搜索订阅源 | 输入关键词后显示匹配的订阅源 | ❌ 缺失 |
| US-06-03 | 搜索文章 | 输入关键词后显示匹配的文章 | ❌ 缺失 |
| US-06-04 | 无搜索结果 | 显示无结果提示 | ❌ 缺失 |
| US-06-05 | 点击搜索结果 | 跳转到对应的订阅源或文章详情 | ❌ 缺失 |
| US-06-06 | 空搜索状态 | 未输入时显示提示信息 | ❌ 缺失 |

---

## US-07: 订阅源管理页面

**作为** 用户，**我希望** 能在专门的管理页面编辑和删除订阅源，**以便** 维护我的订阅列表。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-07-01 | 访问订阅管理页面 | 显示所有订阅源列表 | ❌ 缺失 |
| US-07-02 | 编辑订阅源标题 | 内联编辑标题并保存 | ❌ 缺失 |
| US-07-03 | 编辑订阅源 URL | 内联编辑 URL 并保存 | ❌ 缺失 |
| US-07-04 | 删除订阅源 | 确认后删除订阅源 | ❌ 缺失 |
| US-07-05 | 取消编辑 | 恢复原始值 | ❌ 缺失 |
| US-07-06 | 快速添加订阅源 | 浮动按钮打开添加对话框 | ❌ 缺失 |

---

## US-08: 主题切换

**作为** 用户，**我希望** 能切换应用主题（亮色/暗色/跟随系统），**以便** 获得舒适的阅读体验。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-08-01 | 切换到暗色主题 | HTML 元素添加 `dark` 类名 | ✅ `ci/theme` |
| US-08-02 | 切换到亮色主题 | HTML 元素移除 `dark` 类名 | ✅ `ci/theme` |
| US-08-03 | 主题设置持久化 | 刷新页面后保持之前选择的主题 | ✅ `ci/theme` |
| US-08-04 | 跟随系统主题 | 设为系统模式后，跟随操作系统偏好 | ✅ `ci/theme` |
| US-08-05 | 主题跨页面保持 | 导航到不同页面时主题不变 | ✅ `theme` |
| US-08-06 | 设置页面主题选择器 | 设置页面显示主题选择下拉框 | ✅ `ci/theme` |

---

## US-09: 多语言支持

**作为** 用户，**我希望** 能切换应用语言（中文/英文），**以便** 使用我习惯的语言。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-09-01 | 切换到英文 | 页面标题和 UI 文本切换为英文 | ✅ `ci/settings` |
| US-09-02 | 切换到中文 | 页面标题和 UI 文本切换为中文 | ✅ `ci/settings` |
| US-09-03 | 语言设置持久化 | 刷新页面后保持语言选择 | ❌ 缺失 |

---

## US-10: 设置管理

**作为** 用户，**我希望** 能配置应用的各项设置，**以便** 按照个人偏好使用。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-10-01 | 显示所有设置区域 | 主题、语言、刷新间隔等设置项均可见 | ✅ `ci/settings` |
| US-10-02 | 主题设置 | 可切换亮色/暗色/系统 | ✅ `ci/theme` |
| US-10-03 | 语言设置 | 可切换中英文 | ✅ `ci/settings` |
| US-10-04 | OPML 导入/导出选项 | 设置页显示 OPML 相关选项 | ✅ `ci/settings` |
| US-10-05 | 刷新间隔设置 | 可配置自动刷新间隔 | ⚠️ 仅在 `autoRefresh` 中 |
| US-10-06 | 后台同步开关 | 可开启/关闭后台同步 | ⚠️ 仅在 `autoRefresh` 中 |

---

## US-11: OPML 导入导出

**作为** 用户，**我希望** 能导入和导出 OPML 文件，**以便** 迁移和备份订阅源。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-11-01 | 导出 OPML | 生成包含所有订阅源的 OPML 文件 | ❌ 缺失 |
| US-11-02 | 导入 OPML | 从文件导入订阅源列表 | ❌ 缺失 |
| US-11-03 | 导入进度显示 | 导入过程中显示进度 | ❌ 缺失 |

---

## US-12: 订阅源刷新与同步

**作为** 用户，**我希望** 能手动和自动刷新订阅源，**以便** 获取最新的文章。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-12-01 | 手动刷新所有订阅源 | 点击刷新按钮，加载最新文章 | ⚠️ 仅在 `autoRefresh` 中 |
| US-12-02 | 刷新加载状态 | 刷新过程中显示加载动画 | ⚠️ 仅在 `autoRefresh` 中 |
| US-12-03 | 刷新后显示更新时间 | 订阅源卡片显示最后更新时间 | ⚠️ 仅在 `autoRefresh` 中 |
| US-12-04 | 离线状态刷新处理 | 离线时刷新优雅降级 | ⚠️ 仅在 `autoRefresh` 中 |

---

## US-13: 分类管理

**作为** 用户，**我希望** 能通过分类组织订阅源，**以便** 更好地管理大量订阅。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-13-01 | 创建分类 | 输入分类名称，成功创建 | ❌ 缺失 |
| US-13-02 | 按分类筛选 | 侧边栏点击分类，筛选对应订阅源 | ❌ 缺失 |
| US-13-03 | 查看所有订阅源 | 点击"全部"显示所有订阅源 | ❌ 缺失 |
| US-13-04 | 查看未分类 | 点击"未分类"显示未归类的订阅源 | ❌ 缺失 |

---

## US-14: 响应式布局与导航

**作为** 用户，**我希望** 应用在不同设备上都有良好的体验，**以便** 在手机和电脑上使用。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-14-01 | 桌面端导航 | 显示完整导航菜单 | ⚠️ 部分（`ci/pageLoad`） |
| US-14-02 | 移动端导航 | 显示汉堡菜单，展开抽屉导航 | ❌ 缺失 |
| US-14-03 | 移动端视口 (375px) | 页面正常加载和操作 | ⚠️ 仅在 `addFeed` 中 |
| US-14-04 | 平板视口 (768px) | 页面正常加载和操作 | ⚠️ 仅在 `addFeed` 中 |
| US-14-05 | 桌面视口 (1024px) | 页面正常加载和操作 | ⚠️ 仅在 `addFeed` 中 |

---

## US-15: 离线支持

**作为** 用户，**我希望** 在离线时仍能阅读已缓存的内容，**以便** 在无网络时使用。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-15-01 | 离线指示器 | 离线时显示离线状态提示 | ⚠️ 仅在集成测试中 |
| US-15-02 | 离线阅读缓存文章 | 可查看已缓存的文章内容 | ⚠️ 仅在集成测试中 |
| US-15-03 | 离线时添加订阅限制 | 显示离线无法添加的提示 | ❌ 缺失 |

---

## US-16: 错误处理

**作为** 用户，**我希望** 操作失败时能看到明确的错误提示，**以便** 了解问题并采取措施。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-16-01 | 添加订阅源失败 | 显示错误信息 | ✅ `ci/feedSubscription` |
| US-16-02 | 刷新失败 | 优雅降级，显示提示 | ⚠️ 仅在 `autoRefresh` 中 |
| US-16-03 | 页面加载失败 | 显示错误或空状态 | ❌ 缺失 |

---

## US-17: AI 翻译功能

**作为** 用户，**我希望** 能将文章内容翻译成中文，**以便** 阅读非母语的文章内容。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-17-01 | 文章详情页显示翻译按钮 | 底部操作栏显示"翻译"按钮（Languages 图标） | ✅ `ci/aiFeatures` |
| US-17-02 | 点击翻译按钮触发翻译 | 调用 AI API 逐段翻译文章内容，翻译内容以斜体显示在原文下方 | ❌ 缺失（依赖 AI API） |
| US-17-03 | 翻译中显示加载状态 | 翻译过程中按钮文本变为"停止翻译"，图标变为加载动画 | ❌ 缺失（依赖 AI API） |
| US-17-04 | 取消正在进行的翻译 | 翻译过程中再次点击按钮可取消翻译 | ❌ 缺失（依赖 AI API） |
| US-17-05 | 已翻译内容可关闭 | 翻译完成后再次点击按钮可隐藏翻译内容 | ❌ 缺失（依赖 AI API） |
| US-17-06 | 翻译失败显示错误提示 | 翻译失败时显示"翻译失败"错误信息 | ❌ 缺失（依赖 AI API） |
| US-17-07 | 翻译超时自动取消 | 超过 60 秒自动中止翻译操作 | ❌ 缺失（依赖 AI API） |

---

## US-18: AI 总结功能

**作为** 用户，**我希望** 能获取文章的 AI 总结，**以便** 快速了解文章要点。

### 验收标准

| ID | 场景 | 预期结果 | E2E 覆盖 |
|----|------|----------|----------|
| US-18-01 | 文章详情页显示 AI 总结按钮 | 底部操作栏显示"AI 总结"按钮（Sparkles 图标） | ✅ `ci/aiFeatures` |
| US-18-02 | 点击总结按钮触发总结 | 调用 AI API 生成 3-5 句摘要，显示在文章顶部 | ❌ 缺失（依赖 AI API） |
| US-18-03 | 总结中显示加载状态 | 总结过程中按钮文本变为"停止总结"，图标变为加载动画 | ❌ 缺失（依赖 AI API） |
| US-18-04 | 取消正在进行的总结 | 总结过程中再次点击按钮可取消总结 | ❌ 缺失（依赖 AI API） |
| US-18-05 | 已总结内容可关闭 | 总结完成后再次点击按钮可隐藏总结内容 | ❌ 缺失（依赖 AI API） |
| US-18-06 | 总结内容区域样式 | 总结以"AI 总结"标题显示在蓝色高亮区域中 | ❌ 缺失（依赖 AI API） |
| US-18-07 | 总结失败显示错误提示 | 总结失败时显示"AI 总结失败"错误信息 | ❌ 缺失（依赖 AI API） |
| US-18-08 | 总结超时自动取消 | 超过 60 秒自动中止总结操作 | ❌ 缺失（依赖 AI API） |
| US-18-09 | 长文自动截断 | 超过 4000 字符的文章自动截断后再总结 | ❌ 缺失（依赖 AI API） |

---

## E2E 测试覆盖矩阵

### 已覆盖（✅）

| 用户故事 | 测试文件 | 覆盖的场景 |
|----------|----------|------------|
| US-01 页面加载 | `ci/pageLoad.spec.ts` | 8/8 场景 |
| US-02 订阅管理 | `ci/feedSubscription.spec.ts` | 5/10 场景 |
| US-03 文章阅读 | `ci/feedSubscription.spec.ts` + `ci/articleReading.spec.ts` | 11/11 场景 |
| US-04 收藏功能 | `ci/favorites.spec.ts` | 3/7 场景 |
| US-05 阅读历史 | `ci/history.spec.ts` | 4/6 场景 |
| US-06 搜索功能 | `ci/search.spec.ts` | 5/6 场景 |
| US-07 订阅管理页 | `ci/feedManagement.spec.ts` | 5/6 场景 |
| US-08 主题切换 | `ci/theme.spec.ts` | 6/6 场景 |
| US-09 多语言 | `ci/settings.spec.ts` | 2/3 场景 |
| US-10 设置管理 | `ci/settings.spec.ts` | 4/6 场景 |
| US-17 AI 翻译 | `ci/aiFeatures.spec.ts` | 1/7 场景（UI 按钮可见性） |
| US-18 AI 总结 | `ci/aiFeatures.spec.ts` | 1/9 场景（UI 按钮可见性） |

### 未覆盖（❌）

| 用户故事 | 缺失场景 | 优先级 |
|----------|----------|--------|
| US-17 AI 翻译 | 翻译执行、加载状态、取消、错误处理（6 个场景，依赖 AI API） | 🟡 中 |
| US-18 AI 总结 | 总结执行、加载状态、取消、错误处理（8 个场景，依赖 AI API） | 🟡 中 |
| US-02 订阅管理 | 删除、分类、空状态（3-5个场景） | 🟡 中 |
| US-09 语言持久化 | 1个场景 | 🟢 低 |
| US-11 OPML | 全部（3个场景） | 🟢 低 |
| US-13 分类管理 | 全部（4个场景） | 🟢 低 |
| US-14 响应式 | 移动端导航（2个场景） | 🟢 低 |

> **注意**：AI 翻译和 AI 总结功能的完整流程测试依赖后端 AI API 服务（`/api/chat`），
> E2E 测试中仅验证 UI 按钮可见性和操作栏布局。完整的 AI 交互流程建议在集成测试中通过 mock API 进行验证。
